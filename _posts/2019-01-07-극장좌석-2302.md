---
layout: post
title: "2302번) 극장 좌석"
date:   2019-01-07
categories: [Algorithm]
icon: icon-java
---

# 문제
어떤 극장의 좌석은 한 줄로 되어 있으며 왼쪽부터 차례대로 1번부터 N번까지 번호가 매겨져 있다. 공연을 보러 온 사람들은 자기의 입장권에 표시되어 있는 좌석에 앉아야 한다. 예를 들어서, 입장권에 5번이 쓰여 있으면 5번 좌석에 앉아야 한다. 단, 자기의 바로 왼쪽 좌석 또는 바로 오른쪽 좌석으로는 자리를 옮길 수 있다. 예를 들어서, 7번 입장권을 가진 사람은 7번 좌석은 물론이고, 6번 좌석이나 8번 좌석에도 앉을 수 있다. 그러나 5번 좌석이나 9번 좌석에는 앉을 수 없다.

그런데 이 극장에는 “VIP 회원”들이 있다. 이 사람들은 반드시 자기 좌석에만 앉아야 하며 옆 좌석으로 자리를 옮길 수 없다.

오늘 공연은 입장권이 매진되어 1번 좌석부터 N번 좌석까지 모든 좌석이 다 팔렸다. VIP 회원들의 좌석 번호들이 주어졌을 때, 사람들이 좌석에 앉는 서로 다른 방법의 가짓수를 구하는 프로그램을 작성하시오.

예를 들어서, 그림과 같이 좌석이 9개이고, 4번 좌석과 7번 좌석이 VIP석인 경우에 <123456789>는 물론 가능한 배치이다. 또한 <213465789> 와 <132465798> 도 가능한 배치이다. 그러나 <312456789> 와 <123546789> 는 허용되지 않는 배치 방법이다. [baekjoon](https://www.acmicpc.net/problem/2302)

![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/upload/201011/gg.png)

<br>

# 코드
```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class 극장좌석_2302 {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int n = Integer.parseInt(br.readLine()), m = Integer.parseInt(br.readLine());
        boolean[] isVIP = new boolean[n + 1];
        for (int i = 1; i <= m; i++) {
            isVIP[Integer.parseInt(br.readLine())] = true;
        }
        br.close();

        int[] dp = new int[n + 1];
        dp[0] = 1;
        dp[1] = 1;
        for (int i = 2; i <= n; i++) { dp[i] = dp[i - 1] + dp[i - 2]; }

        int chain = 0, result = 1, lastVIPIndex = 0;
        for (int i = 1; i <= n; i++) {
            if (isVIP[i]) {
                result *= dp[chain];
                chain = 0;
                lastVIPIndex = i;
            } else {
                chain++;
            }
        }
        result *= dp[n - lastVIPIndex];
        System.out.println(result);
    }
}
```

<br>

# 풀이
VIP 좌석이 없는 n개의 좌석을 배치하는 경우의 수는 구해보면 피보나치 수열과 같은 형태로 증가하게 된다. 따라서 VIP 좌석과 다음 VIP 좌석 사이의 좌석 수(chain)들을 구한 뒤, 그 chain에 해당하는 경우의 수들을 곱해주면 총 배치하는 경우의 수가 된다. 마지막 VIP 좌석과 입력받은 n 좌석 사이의 배치 경우의 수를 위해 lastVIPIndex를 관리한다.
